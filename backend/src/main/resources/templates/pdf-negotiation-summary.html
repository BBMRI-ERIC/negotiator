<!--
This Thymeleaf template renders a styled summary of a negotiation for PDF generation.
It includes negotiation metadata, dynamic payload sections, and supports structured field rendering.
-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <style>
        body { font-family: Arial, sans-serif; font-size: 11pt; margin: 3em; line-height: 1.5; color: #000; }
        h1, h2 { color: #003366; }
        h1 { margin-top: 0; font-size: 18pt; }
        h2 { font-size: 14pt; margin-top: 2em; border-bottom: 1px solid #ccc; padding-bottom: 0.2em; }

        .logo { margin-bottom: 1.5em; text-align: right; }
        .logo-bbmri { width: 200px; height: auto; }
        .section { margin-bottom: 1.5em; }
        .field { margin-bottom: 0.4em; }
        .label { display: inline-block; width: 180px; font-weight: bold; vertical-align: top; }
        .value { display: inline-block; width: 400px; }

        .object-placeholder { color: #777; font-style: italic; }
        .toc { margin-bottom: 2em; }
        .toc-entry { margin-bottom: 0.5em; }
        .toc-link { color: #003366; text-decoration: none; }
    </style>
</head>
<body>

<div class="logo">
    <!-- Insert logo fragment -->
    <div th:insert="~{logo}"></div>
</div>

<h1>REQUEST SUMMARY</h1>
<div class="section">
    <div class="field"><span class="label">Author:</span> <span class="value" th:text="${negotiationPdfData.author.name}">Alice Administrator</span></div>
    <div class="field"><span class="label">Email:</span> <span class="value" th:text="${negotiationPdfData.author.email}">alice.administrator@gmail.com</span></div>
    <div class="field"><span class="label">Negotiation ID:</span> <span class="value" th:text="${negotiationPdfData.id}">UUID-HERE</span></div>
    <div class="field"><span class="label">Submitted at:</span> <span class="value" th:text="${negotiationPdfData.createdAt}">May 13, 2025 - 1:26 PM</span></div>
    <div class="field"><span class="label">Status:</span> <span class="value" th:text="${negotiationPdfData.status}">UNDER REVIEW</span></div>
    <div class="field"><span class="label">Report generated at:</span> <span class="value" th:text="${now}">May 13, 2025 - 1:27 PM</span></div>
</div>

<div class="toc">
    <h2>Table of Contents</h2>
    <div class="toc-entry" th:each="section, iterStat : ${negotiationPdfData.payload}">
        <a class="toc-link" th:href="#section-${iterStat.index}" th:text="${#strings.capitalize(section.key)}">Section Name</a>
    </div>
</div>

<div th:each="section : ${negotiationPdfData.payload}">
    <h2 th:text="${#strings.toUpperCase(section.key)}">SECTION</h2>
    <div class="section">
        <div class="field" th:each="entry : ${section.value}">
            <span class="label" th:text="${entry.key + ':'}">field-name:</span>

            <!-- List -->
            <span class="value" th:if="${entry.value instanceof T(java.util.List)}"
                  th:text="${#strings.arrayJoin(entry.value, ', ')}">list, of, values</span>

            <!-- Map -->
            <span class="value object-placeholder" th:if="${entry.value instanceof T(java.util.Map)}">[object]</span>

            <!-- Scalar -->
            <span class="value" th:if="${!(entry.value instanceof T(java.util.List)) and !(entry.value instanceof T(java.util.Map))}"
                  th:text="${entry.value}">simple value</span>
        </div>
    </div>
</div>

</body>
</html>
